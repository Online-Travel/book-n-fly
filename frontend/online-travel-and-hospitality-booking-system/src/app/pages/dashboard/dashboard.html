<div class="container mt-4">
  <h2>Travel Packages Dashboard</h2>
  <button class="btn btn-outline-secondary float-end" (click)="auth.logout()">Logout</button>

  <!-- Add Package Form -->
  <div class="card p-3 mb-4">
    <h4>Add / Update Package</h4>
    <form (ngSubmit)="onSubmit()">
      <div class="form-group mb-2">
        <label>Name</label>
        <input type="text" [(ngModel)]="packageForm.name" name="name" class="form-control" required />
      </div>

      <div class="form-group mb-2">
        <label>Destination</label>
        <input type="text" [(ngModel)]="packageForm.destination" name="destination" class="form-control" required />
      </div>

      <div class="form-group mb-2">
        <label>Description</label>
        <textarea [(ngModel)]="packageForm.description" name="description" class="form-control"></textarea>
      </div>

      <div class="form-group mb-2">
        <label>Price</label>
        <input type="number" [(ngModel)]="packageForm.price" name="price" class="form-control" required />
      </div>

      <div class="form-group mb-2">
        <label>Duration (Days)</label>
        <input type="number" [(ngModel)]="packageForm.durationDays" name="durationDays" class="form-control" />
      </div>

      <div class="form-group mb-2">
        <label>Activities (comma separated)</label>
        <input type="text" [(ngModel)]="activitiesInput" name="activities" class="form-control" />
      </div>

      <button type="submit" class="btn btn-primary">
        {{ packageForm.id ? "Update Package" : "Add Package" }}
      </button>
      <button type="button" class="btn btn-secondary ms-2" (click)="resetForm()">Reset</button>
    </form>
  </div>

  <!-- Package List -->
  <div class="card p-3">
    <h4>All Packages</h4>
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Destination</th>
          <th>Price</th>
          <th>Duration</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (pkg of packages; track pkg.id) {
          <tr>
            <td>{{ pkg.id }}</td>
            <td>{{ pkg.name }}</td>
            <td>{{ pkg.destination }}</td>
            <td>{{ pkg.price | currency:'INR' }}</td>
            <td>{{ pkg.durationDays }} days</td>
            <td>
              <span [ngClass]="pkg.active ? 'text-success' : 'text-danger'">
                {{ pkg.active ? 'Active' : 'Inactive' }}
              </span>
            </td>
            <td>
              <button class="btn btn-sm btn-info" (click)="editPackage(pkg)">Edit</button>
              <button class="btn btn-sm btn-warning ms-1" (click)="softDelete(pkg.id)">Inactive</button>
              <button class="btn btn-sm btn-danger ms-1" (click)="hardDelete(pkg.id)">Hard Delete</button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
